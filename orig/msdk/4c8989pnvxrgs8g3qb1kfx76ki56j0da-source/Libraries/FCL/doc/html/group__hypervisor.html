<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FCL: uVisor API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="maxim-logo-202.gif"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FCL
   </div>
   <div id="projectbrief">Free Cryptographic Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__hypervisor.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">uVisor API</div>  </div>
</div><!--header-->
<div class="contents">
<p>The payment application is to be developed by the payment terminal vendor. It dialogs with the 2 secure boxes through remote procedure calls (RPC). The API is described below in this document. Shortly this API allows to display trusted messages on the display, perform EMV-level 1 compliant APDU exchanges with the smart card, perform PIN processing, capture Mag Stripe… basically everything required to perform an EMV Level-2 compliant payment.</p>
<p>Here you can find detailed documentation for:</p>
<ol type="1">
<li><a href="#configuration-macros">Configuration macros</a>, to configure a secure box and protect data and peripherals.</li>
<li><a href="#box-identity">Box Identity</a>, to retrieve a box-specific ID or the namespace of the current or calling box.<ul>
<li>A box identity identifies a security domain uniquely and globally.</li>
<li>The box identity API can be used to determine the source box of an inbound secure gateway call. This can be useful for implementing complex authorization logic between mutually distrustful security domains.</li>
<li>uVisor provides the ability to retrieve the box ID of the current box (<code>uvisor_box_id_self</code>), or of the box that called the current box through an RPC gateway via the <code>box_id_caller</code> parameter of <code>rpc_fncall_waitfor</code>.</li>
<li>The box ID number is not constant and can change between reboots. But, the box ID number can be used as a token to retrieve a constant string identifier, known as the box namespace.</li>
<li>A box namespace is a static, box-specific string, that can help identify which box has which ID at run-time. In the future, the box namespace will be guaranteed to be globally unique.</li>
<li>A full example using this API is available at <a href="https://github.com/ARMmbed/mbed-os-example-uvisor-number-store">mbed-os-example-uvisor-number-store</a>.</li>
</ul>
</li>
<li><a href="#low-level-apis">Low level APIs</a>, to access uVisor functions that are not available to unprivileged code (interrupts, restricted system registers).</li>
<li><a href="#type-definitions">Type definitions</a>.</li>
<li><a href="#error-codes">Error codes</a>.</li>
</ol>
<table class="doxtable">
<tr>
<th>Error reason </th><th>Error code  </th></tr>
<tr>
<td><code>PERMISSION_DENIED</code> </td><td>1 </td></tr>
<tr>
<td><code>SANITY_CHECK_FAILED</code> </td><td>2 </td></tr>
<tr>
<td><code>NOT_IMPLEMENTED</code> </td><td>3 </td></tr>
<tr>
<td><code>NOT_ALLOWED</code> </td><td>4 </td></tr>
<tr>
<td><code>FAULT_MEMMANAGE</code> </td><td>5 </td></tr>
<tr>
<td><code>FAULT_BUS</code> </td><td>6 </td></tr>
<tr>
<td><code>FAULT_USAGE</code> </td><td>7 </td></tr>
<tr>
<td><code>FAULT_HARD</code> </td><td>8 </td></tr>
<tr>
<td><code>FAULT_DEBUG</code> </td><td>9 </td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="site-footer" align="center">
<div id="site-footer-edge1"></div>
<!-- BEGIN: FOOTER CONTROL PANEL -->
<div id="fcp-shell">
<table id="fcp-table1" border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="middle">
    <td id="fcp-box1" align="left" width="97%">
    <div class="fcp-text"><nobr>© 2017 Maxim Integrated</nobr></div>
    </td>
    <td id="fcp-box2" align="right" width="1%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td id="fcp-box3" align="right" width="1%">
    <div class="fcp-text"><nobr>
    <a class="fcp" href="http://www.maximintegrated.com/contact/">Contact Us</a>
    &nbsp;&nbsp; | &nbsp;&nbsp;
    <a class="fcp" href="http://www.maximintegrated.com/legal/privacy.cfm">Privacy Policy</a>
    &nbsp;&nbsp; | &nbsp;&nbsp;
    <a class="fcp" href="http://www.maximintegrated.com/legal/">Legal Notices</a>
    &nbsp;&nbsp; | &nbsp;&nbsp;
    </nobr></div>
    </td>
</tr>
</tbody></table>
</div><!-- /fcp-shell -->
<!-- END: FOOTER CONTROL PANEL -->
<div id="site-footer-edge2"></div>
</div>
